var app = {};
(function() {
app = angular.module("MainApp", ['ngRoute', 'ngSanitize', 'ngResource', 'ngAnimate', 'mgcrea.ngStrap'])
app.config(function ($routeProvider, $locationProvider) {
    $locationProvider.html5Mode(false).hashPrefix('!');
    $routeProvider
        .when("/", {
            templateUrl: '/views/index.html', controller: 'mainCtrl'
        })
        .when("/customers", {
            templateUrl: '/views/customers/customers.html', controller: 'customersCtrl'
        }).otherwise({
            redirectTo: "/"
        });
});
})();





// var token = "XXX";
// (function() {
 
// })();
   (function(){
    app.controller("globalCtrl", function ($scope) {
        $scope.pageData = [
            {Name: 'Home'},
            {Name: 'Customers'}
        ];
        $scope.directiveTest = "YO YO Mgular";
    });
   })();
(function () {
    console.log('Check point1');
    app.controller('customersCtrl', ($scope) => {
        console.log('OK');
    //     $scope.activePage = 2; //"Customers";
    //     $scope.readCustomersData = [];

    //     $scope.createNewCustomers = function () {
    //         customersService.createNewCustomers($scope.modalData).then((result) => {
    //             if (result) {
    //                 $scope.readCustomersData.push(result.data);
    //             }
    //         });
    //     }
    //     $scope.modalData = {};
    //     $scope.readAllCustomers = function () {
    //         console.log('OK');
    //         customersService.readAllCustomers().then((result) => {
    //             if (result != null) { 
                    
    //                 $scope.readCustomersData = result.data;
    //             }
    //         });
    //     };
    //     $scope.updateCustomers = function () {
    //         var id = $scope.currentID;
    //         var index = $scope.currentIndex;
    //         customersService.updateCustomers($scope.modalData, id).then((result) => {
    //             if (result) {
    //                 $scope.readCustomersData[index] = $scope.modalData;
    //             }
    //         });
    //     };

    //     $scope.deleteSample = function () {
    //         var id = $scope.currentID;
    //         var index = $scope.currentIndex;
    //         customersService.deleteSample(id).then((result) => {
    //             if (result) {
    //                 $scope.readCustomersData.splice(index, 1);
    //             }
    //         });
    //     };

    //     $scope.checkData = function () {
    //         switch ($scope.modalMode) {
    //             case "create":
    //                 $scope.createNewCustomers();
    //                 break;
    //             case "edit":
    //                 $scope.updateCustomers();
    //                 break;
    //         }
    //     }
    //     $scope.showCustomers = function (type, id, index) {
    //         $scope.modalMode = type;
    //         $scope.currentID = id;
    //         $scope.currentIndex = index;
    //         var myOtherModal = $modal({ scope: $scope, template: '/views/sample/modal/customersModal.ejs', show: false });

    //         switch (type) {
    //             case 'create':
    //                 $scope.modalData = {};
    //                 $scope.modalData.readOnly = false;
    //                 myOtherModal.$promise.then(myOtherModal.show);
    //                 break;
    //             case 'edit':
    //                 $scope.read(id, function (result) {
    //                     if (result != "ERROR") {
    //                         myOtherModal.$promise.then(myOtherModal.show);
    //                         $scope.modalData = result;
    //                         $scope.modalData.bCreate = JSON.parse(result.bCreate);
    //                         $scope.modalData.readOnly = false;
    //                     }
    //                 });
    //                 break;
    //         }
    //     };

    });
})();
(function () {
    app.factory('customersService', ($http, $q) => {
        let x = {};
        x.readAllCustomers = () => {
            var defer = $q.defer();
            $http(
                {
                    method: 'GET',
                    url: '/customers',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json'
                    // headers: {
                    //     'RequestVerificationToken': token
                    // }
                })
                .then((result) => {
                    defer.resolve(result);
                }).catch((result) => {
                    defer.reject(result);
                });
            return defer.promise;
        };

        x.createNewCustomers = function (obj) {
            var defer = $q.defer();
            $http({
                method: "POST",
                url: '/customers/saveadd',
                contentType: 'application/json; charset=utf-8',
                data: {
                    Name: obj.name,
                    Address: obj.address,
                    Email: obj.email,
                    Phone: obj.phone
                },
                dataType: 'json'
                // headers: {
                //     'RequestVerificationToken': token
                // }
            }).then(function (data) {
                defer.resolve(data);
            }, function (data) {
                defer.reject(data);
            });
            return defer.promise;
        };

        x.updateCustomers = function (obj, id) {
            var defer = $q.defer();
            $http({
                method: "POST",
                url: '/save_edit/' + id,
                data: {
                    Name: obj.name,
                    Address: obj.address,
                    Email: obj.email,
                    Phone: obj.phone
                },
                contentType: 'application/json; charset=utf-8',
                dataType: 'json'
                // headers: {
                //     'RequestVerificationToken': token
                // }
            }).then(function (data) {
                defer.resolve(data);
            }, function (data) {
                defer.reject(data);
            });
            return defer.promise;
        };

        x.deleteCustomers = function (id) {
            var defer = $q.defer();
            $http({
                method: 'GET',
                url: '/delete_customer/' + id,
                contentType: 'application/json; charset=utf-8',
                dataType: 'json'
                // headers: {
                //     'RequestVerificationToken': token
                // }
            }).then(function (data) {
                defer.resolve(data);
            }, function (data) {
                defer.reject(data);
            });
            return defer.promise;
        };

        return x;
    });
})();


(function(){
    app.controller('mainCtrl', function ($scope) {
        $scope.activePage = 1; // Home     
    });
})();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJhbGxqYXZhc2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSB7fTtcclxuKGZ1bmN0aW9uKCkge1xyXG5hcHAgPSBhbmd1bGFyLm1vZHVsZShcIk1haW5BcHBcIiwgWyduZ1JvdXRlJywgJ25nU2FuaXRpemUnLCAnbmdSZXNvdXJjZScsICduZ0FuaW1hdGUnLCAnbWdjcmVhLm5nU3RyYXAnXSlcclxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XHJcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpLmhhc2hQcmVmaXgoJyEnKTtcclxuICAgICRyb3V0ZVByb3ZpZGVyXHJcbiAgICAgICAgLndoZW4oXCIvXCIsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaW5kZXguaHRtbCcsIGNvbnRyb2xsZXI6ICdtYWluQ3RybCdcclxuICAgICAgICB9KVxyXG4gICAgICAgIC53aGVuKFwiL2N1c3RvbWVyc1wiLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3ZpZXdzL2N1c3RvbWVycy9jdXN0b21lcnMuaHRtbCcsIGNvbnRyb2xsZXI6ICdjdXN0b21lcnNDdHJsJ1xyXG4gICAgICAgIH0pLm90aGVyd2lzZSh7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL1wiXHJcbiAgICAgICAgfSk7XHJcbn0pO1xyXG59KSgpO1xyXG5cclxuXHJcblxyXG5cclxuXG4vLyB2YXIgdG9rZW4gPSBcIlhYWFwiO1xyXG4vLyAoZnVuY3Rpb24oKSB7XHJcbiBcclxuLy8gfSkoKTtcbiAgIChmdW5jdGlvbigpe1xyXG4gICAgYXBwLmNvbnRyb2xsZXIoXCJnbG9iYWxDdHJsXCIsIGZ1bmN0aW9uICgkc2NvcGUpIHtcclxuICAgICAgICAkc2NvcGUucGFnZURhdGEgPSBbXHJcbiAgICAgICAgICAgIHtOYW1lOiAnSG9tZSd9LFxyXG4gICAgICAgICAgICB7TmFtZTogJ0N1c3RvbWVycyd9XHJcbiAgICAgICAgXTtcclxuICAgICAgICAkc2NvcGUuZGlyZWN0aXZlVGVzdCA9IFwiWU8gWU8gTWd1bGFyXCI7XHJcbiAgICB9KTtcclxuICAgfSkoKTtcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZygnQ2hlY2sgcG9pbnQxJyk7XHJcbiAgICBhcHAuY29udHJvbGxlcignY3VzdG9tZXJzQ3RybCcsICgkc2NvcGUpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnT0snKTtcclxuICAgIC8vICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDI7IC8vXCJDdXN0b21lcnNcIjtcclxuICAgIC8vICAgICAkc2NvcGUucmVhZEN1c3RvbWVyc0RhdGEgPSBbXTtcclxuXHJcbiAgICAvLyAgICAgJHNjb3BlLmNyZWF0ZU5ld0N1c3RvbWVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICAgICAgY3VzdG9tZXJzU2VydmljZS5jcmVhdGVOZXdDdXN0b21lcnMoJHNjb3BlLm1vZGFsRGF0YSkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRDdXN0b21lcnNEYXRhLnB1c2gocmVzdWx0LmRhdGEpO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9KTtcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xyXG4gICAgLy8gICAgICRzY29wZS5yZWFkQWxsQ3VzdG9tZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnT0snKTtcclxuICAgIC8vICAgICAgICAgY3VzdG9tZXJzU2VydmljZS5yZWFkQWxsQ3VzdG9tZXJzKCkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsgXHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRDdXN0b21lcnNEYXRhID0gcmVzdWx0LmRhdGE7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgIH07XHJcbiAgICAvLyAgICAgJHNjb3BlLnVwZGF0ZUN1c3RvbWVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICAgICAgdmFyIGlkID0gJHNjb3BlLmN1cnJlbnRJRDtcclxuICAgIC8vICAgICAgICAgdmFyIGluZGV4ID0gJHNjb3BlLmN1cnJlbnRJbmRleDtcclxuICAgIC8vICAgICAgICAgY3VzdG9tZXJzU2VydmljZS51cGRhdGVDdXN0b21lcnMoJHNjb3BlLm1vZGFsRGF0YSwgaWQpLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgLy8gICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICRzY29wZS5yZWFkQ3VzdG9tZXJzRGF0YVtpbmRleF0gPSAkc2NvcGUubW9kYWxEYXRhO1xyXG4gICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgLy8gICAgICAgICB9KTtcclxuICAgIC8vICAgICB9O1xyXG5cclxuICAgIC8vICAgICAkc2NvcGUuZGVsZXRlU2FtcGxlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgICAgICB2YXIgaWQgPSAkc2NvcGUuY3VycmVudElEO1xyXG4gICAgLy8gICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xyXG4gICAgLy8gICAgICAgICBjdXN0b21lcnNTZXJ2aWNlLmRlbGV0ZVNhbXBsZShpZCkudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAvLyAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRDdXN0b21lcnNEYXRhLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIH0pO1xyXG4gICAgLy8gICAgIH07XHJcblxyXG4gICAgLy8gICAgICRzY29wZS5jaGVja0RhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyAgICAgICAgIHN3aXRjaCAoJHNjb3BlLm1vZGFsTW9kZSkge1xyXG4gICAgLy8gICAgICAgICAgICAgY2FzZSBcImNyZWF0ZVwiOlxyXG4gICAgLy8gICAgICAgICAgICAgICAgICRzY29wZS5jcmVhdGVOZXdDdXN0b21lcnMoKTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgXCJlZGl0XCI6XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZUN1c3RvbWVycygpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICB9XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gICAgICRzY29wZS5zaG93Q3VzdG9tZXJzID0gZnVuY3Rpb24gKHR5cGUsIGlkLCBpbmRleCkge1xyXG4gICAgLy8gICAgICAgICAkc2NvcGUubW9kYWxNb2RlID0gdHlwZTtcclxuICAgIC8vICAgICAgICAgJHNjb3BlLmN1cnJlbnRJRCA9IGlkO1xyXG4gICAgLy8gICAgICAgICAkc2NvcGUuY3VycmVudEluZGV4ID0gaW5kZXg7XHJcbiAgICAvLyAgICAgICAgIHZhciBteU90aGVyTW9kYWwgPSAkbW9kYWwoeyBzY29wZTogJHNjb3BlLCB0ZW1wbGF0ZTogJy92aWV3cy9zYW1wbGUvbW9kYWwvY3VzdG9tZXJzTW9kYWwuZWpzJywgc2hvdzogZmFsc2UgfSk7XHJcblxyXG4gICAgLy8gICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIC8vICAgICAgICAgICAgIGNhc2UgJ2NyZWF0ZSc6XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbERhdGEucmVhZE9ubHkgPSBmYWxzZTtcclxuICAgIC8vICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgICAgICBjYXNlICdlZGl0JzpcclxuICAgIC8vICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgbXlPdGhlck1vZGFsLiRwcm9taXNlLnRoZW4obXlPdGhlck1vZGFsLnNob3cpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcclxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tb2RhbERhdGEuYkNyZWF0ZSA9IEpTT04ucGFyc2UocmVzdWx0LmJDcmVhdGUpO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YS5yZWFkT25seSA9IGZhbHNlO1xyXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgIH1cclxuICAgIC8vICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG59KSgpO1xuKGZ1bmN0aW9uICgpIHtcclxuICAgIGFwcC5mYWN0b3J5KCdjdXN0b21lcnNTZXJ2aWNlJywgKCRodHRwLCAkcSkgPT4ge1xyXG4gICAgICAgIGxldCB4ID0ge307XHJcbiAgICAgICAgeC5yZWFkQWxsQ3VzdG9tZXJzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAkaHR0cChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9jdXN0b21lcnMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgeC5jcmVhdGVOZXdDdXN0b21lcnMgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY3VzdG9tZXJzL3NhdmVhZGQnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBvYmoubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBBZGRyZXNzOiBvYmouYWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBFbWFpbDogb2JqLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIFBob25lOiBvYmoucGhvbmVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgICAgICAgICAvLyBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB4LnVwZGF0ZUN1c3RvbWVycyA9IGZ1bmN0aW9uIChvYmosIGlkKSB7XHJcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICRodHRwKHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvc2F2ZV9lZGl0LycgKyBpZCxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBOYW1lOiBvYmoubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBBZGRyZXNzOiBvYmouYWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBFbWFpbDogb2JqLmVtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIFBob25lOiBvYmoucGhvbmVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gICAgICAgICAgICAgICAgLy8gaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgeC5kZWxldGVDdXN0b21lcnMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgJGh0dHAoe1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIHVybDogJy9kZWxldGVfY3VzdG9tZXIvJyArIGlkLFxyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbidcclxuICAgICAgICAgICAgICAgIC8vIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB4O1xyXG4gICAgfSk7XHJcbn0pKCk7XHJcblxyXG5cbihmdW5jdGlvbigpe1xyXG4gICAgYXBwLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgZnVuY3Rpb24gKCRzY29wZSkge1xyXG4gICAgICAgICRzY29wZS5hY3RpdmVQYWdlID0gMTsgLy8gSG9tZSAgICAgXHJcbiAgICB9KTtcclxufSkoKTtcclxuXG4iXSwiZmlsZSI6ImFsbGphdmFzY3JpcHQuanMifQ==
